<ul>
  <% for @photoset in @photosets %>
    <%= erb :photoset, :layout => false %>
  <% end %>
</ul>

<script type="text/javascript" charset="utf-8">
  $(function(){
    $('.photoset input').live('change', function(){
      var checkbox = $(this);
      if (checkbox.attr('checked') == true) {
        $.ajax({
          url: '/photosets',
          type: 'POST', data: { photoset_id: checkbox.attr('value') },
          success: function(html) {
            $('#photoset_'+checkbox.attr('value')).replaceWith(html);
          }
        });
        checkbox.attr('disabled', true);
      } else {
        $.ajax({ url: '/photosets/'+checkbox.attr('value'), type: 'DELETE', dataType: 'script' });
      }
    });
  });
</script>